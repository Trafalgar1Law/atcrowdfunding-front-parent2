
今天主要做支付
    第一个黑科技：内网穿透
    我们写好的项目要放在一台服务器（说到底就是一台电脑，性能强一点）上，每个电脑都有一个ip地址，想让大家
都能访问，必须使用公网ip,但是ip不好记，就需要一个域名（说你家住哪里不好记，但是直接叫名字就很方便）,我们敲了
一个域名，浏览器也不知道是什么，问一下dns域名解析器，告诉我们ip地址在哪里，浏览器实际就去访问的是这个IP地址

    实际上这个IP地址不是浏览器问的，而是电脑的操作系统的网卡去做的，我们电脑的etc里面的host文件，就是我们操作系统的
域名的映射文件 ，打开看到host文件什么都没有写，就是所有的域名默认去dns问，防止剁手，可以将淘宝网改为主机地址
127.0.0.1  www.taobao.com

    那现在要把本机做成外网可以访问的，怎么办？
        1 买阿里云服务器
        2 买一个域名 备案【还要45天】
        3 将买的域名和买的服务器进行绑定，那么以后dns就知道这个域名对应的IP地址了

     那么内网穿透是什么呢？
        现在本机外网是不能访问的，市面上有些公司为我们做了一款产品是内网穿透，我们下一个他们的软件，我们只要一开机
      就和他们的内网服务器架起一个连接，内网穿透服务器是有域名的，是可以访问的

--------------------------------------------------------------------------------------------------------
搜内网穿透：
    网上有好多，选择一个，http://www.zhexi.tech/
-------------------------------------------------------------------------------------------------
假设你现在代码写的贼6了，现在你想写一个家庭的云系统：
    假设你买了一个服务器，家里的所有资料，备份到家庭云服务器，内网穿透，你在外就可以访问家里的东西
---------------------------------------------------------------------------------------------------
现在我们要做一个支付功能：
    你要支付要申请一个支付牌照，
        那我们要开发支付怎么做呢？我们都是用第三方支付，用我们的支付宝，微信，银联
        用第三方文档简单就是三句话：找人家的文档，抄人家的api，掉接口

        我们使用蚂蚁金服开放平台

        正常使用支付宝的流程：
           1 创建一个应用，填写应用信息
           2 创建好要对接功能，
           进行签约（上传营业执照等资质文件） (/▽＼)  这样很麻烦，因此我们使用支付宝的沙箱功能
           3 上传接口的加密方式，安全最重要，不上传直接提交审核也会让你弄
           就是为了在传输数据期间进行数据加密
           4 提交审核，审核通过就可以使用支付宝了
           5 下载支付宝的sdk,调用相关的支付功能即可

        什么是沙箱啊？
           1 模拟真实环境，使用沙箱环境，省去签约审核
           2 测试用沙箱，上线后改为正式环境即可
------------------------------------------------------------------------------------------------
RSA
    现今计算机安全体系的基石

    支付宝数据加密是怎么做的呢？
        支付宝使用的是rsa双向加密，网络上发的数据在任何时候都可能被截获，
        商户利用rsa生成两把钥匙，一把是商户私钥（自己留着不给别人的），一把是商户公钥（暴露给别人的）
        支付宝也是这样
        商户把自己生成的公钥交给支付宝，商户用自己的私钥对数据进行加密，然后放在网络中传输支付宝
        把自己要返回的数据也要加密（加签）
------------------------------------------------------------------------------------------------
怎么使用沙箱呢？
    查看文档 在 网页移动应用 网页&移动应用接入文档  进入文档中心-》开发文档
    https://docs.open.alipay.com/11111/vog5hs/ 电脑网站支付   下载电脑网站支付 Demo  sts导入
------------------------------------------------------------------------------------------------
支付调试通过：
    idea中parent中创建spring初始化项目，alipay-test  lombok+web+thymeleaf
------------------------------------------------------------------------------------------------
支付内网穿透调试通过
    进入内网穿透的网页-》端口映射-》http://1eyr0zamta.52http.net/（可能需要更改下端口）
------------------------------------------------------------------------------------------------
支付宝异步通知机制：
    支付宝会悄悄地给我们发送一个请求，告诉我们支付成功的信息
------------------------------------------------------------------------------------------------
验签的重要性：
    异步通知是支付宝发给我们的，现在有个黑客，知道异步地址是什么，就是给你发通知，给你带一个数据，然后更改了数据库
 内容，因此我们需要通过验签来验证这个信息是不是支付宝发来的
------------------------------------------------------------------------------------------------
退款等支付宝的文档：
    方法和支付的一样，代码都在之前下载的demo中
------------------------------------------------------------------------------------------------
我们项目的结构：
    接下来我们要写一个app应用，什么是app应用呢？
        我们项目最终的样子是: 我们写了用户服务，项目服务，支付要在订单服务里面，
                       我们说分布式项目最大的特点是：
                            一个模块放在一个服务器上压力比较大，我么放在好几台服务器上面，
                       对于用户来说，前台写好了，就要有一个可视化界面，和用户直接对接的，用户的所有操作都是操作可视化界面的
                       可视化界面应该是前端做的，里面点登录给我们发请求，前端做的基本就是，页面写好看，然后给我们发请求
                       但问题是现在我们没法让前端写，我们就先自己模拟一个把 atcrowdfundign-app

                       因为要调用其他的服务，所以我们也吧app放到注册中心中

        1 以后只要是.html结尾的都是直接去页面
        2 只要动态请求都不以html结尾
------------------------------------------------------------------------------------------------------
view-controller:

    以后定制springmvc我们可以写一个类实现webmvcconfigurer接口：
    1 定制资源映射规则：addResourceHandlers
    2 定制视图解析器规则
    3 定制添加拦截器等
-------------------------------------------------------------------------------------------------------
app端：
    登陆完成：



